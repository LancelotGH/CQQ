# Role
你是一位精通 Phaser 3 引擎、AI 行为树算法以及游戏架构设计的资深前端游戏开发者。

# Task
请开发一个基于 Web 的《Clash Quest》类战术策略游戏原型。
你需要输出两个文件：
1.  `index.html`: 包含 HTML 结构、CSS 样式和 Phaser 库引用。
2.  `game.js`: 包含所有游戏逻辑、配置数据和资源生成代码。

# 核心技术约束 (关键！)
1.  **资源加载策略 (Asset Fallback System)**:
    * 代码必须实现一套**“优先加载图片，失败自动回退”**的机制。
    * 编写 `TextureGenerator` 类：优先加载 `assets/` 下的图片；若失败，立即用 Canvas API 绘制**带细节的像素风贴图**（如：Boss 绘制带皇冠的大方块，近战兵绘制带剑的方块）。
2.  **配置化设计 (Data Driven)**:
    * 创建 `GAME_CONFIG` 对象。所有数值（HP/ATK/DEF、关卡波次、伤害倍率）必须可配置且包含中文注释。

# 游戏功能需求

## 1. 场景与流程
* **Scene A: 关卡选择 (LevelSelect)**: 15 个关卡从下往上排列，支持滑动。
* **Scene B: 战斗 (BattleScene)**: 包含暂停/退出/重来。

## 2. 布局设计
* **顶部 (Enemy Grid):** 4x4 网格。
* **底部 (Player Grid):** 4x4 网格。**定义：Row 0 为最上方（前排），Row 3 为最下方（后排）。**
* **UI:** 顶部显示波次信息；底部显示“兵库”余量。

## 3. 核心战斗循环 (Ping-Pong Turn)
1.  **玩家回合:**
    * 点击兵种 -> 显示预攻击标记 -> 兵种攻击 -> 兵种消失 -> **棋盘前移补兵**。
2.  **敌方回合:**
    * 选取一个敌人 -> **移动（仅Boss）** -> 显示预攻击标记 (0.5s) -> 发动攻击 -> 玩家受击 -> **若玩家单位死亡则留空**。

### 3.A 补兵逻辑 (Refill Logic)
* **方向：** 向上（向前）填补。
* **规则：** Row N 消失，Row N+1 补位。最底部的空缺由兵库（Deck）新兵填入。

## 4. 单位体系 (Units & Behaviors)

### A. 玩家兵种 (Player Units)
* **近战 (Warrior):** 冲锋到同列最前敌人，攻击后消失。
* **远程 (Archer):** 原地攻击同列最前敌人，攻击后消失。
* **范围 (Mage):** 原地攻击，对目标及其周围造成伤害，攻击后消失。

### B. 敌方小兵 (Enemy Minions)
*行为逻辑与玩家兵种完全镜像（除了不消失）：*
* **敌方近战:** 选取同列最前方的玩家单位 -> **冲锋下落**攻击 -> 返回原位。
* **敌方远程:** 原地攻击同列最前方的玩家单位。

### C. 敌方 Boss (Boss Units)
* **共同特性:** 体积 **2x2** (占据 4 个格子，共享 1 条 HP)。
* **Boss 1 (Col-Smasher):**
    * **移动:** 每回合左右移动 1 格（在 Col 0-1, 1-2, 2-3 之间切换）。
    * **攻击:** 选定玩家的一个随机列（Column），对该列所有单位造成伤害（预警标记需覆盖整列）。
* **Boss 2 (Area-Crusher):**
    * **移动:** 每回合随机移动到一个新的合法 2x2 位置。
    * **攻击:** 选定玩家棋盘上的任意 **2x2 区域**，对区域内单位造成伤害（预警标记需覆盖 2x2 区域）。

## 5. 视觉反馈
* **预攻击标记 (Pre-attack Marker):**
    * 单体：红色瞄准框。
    * Boss 1：整列高亮红色。
    * Boss 2：2x2 区域高亮红色。
* **血条:** 动态绘制。
* **伤害数字:** 飘字效果。

# 代码结构要求

## 文件 1: `index.html`
* 引入 Phaser 3 CDN。
* CSS 居中，深色背景。

## 文件 2: `game.js`
请按以下模块编写：
1.  **GAME_CONFIG**: 包含 Boss 类型定义的配置。
2.  **TextureGenerator**: 像素画生成。
3.  **Classes**:
    * `Unit`: 基类。
    * `EnemyUnit`: 处理近战冲锋/远程逻辑。
    * `BossUnit`: **重点处理 2x2 渲染、Move() 逻辑和 2x2/Column 攻击逻辑。**
4.  **Scenes**: `LevelSelectScene`, `BattleScene` (实现复杂的伤害范围判定)。

# 特别说明
请在代码生成的 `BossUnit` 类中，详细注释 Boss 移动和攻击范围计算的逻辑。